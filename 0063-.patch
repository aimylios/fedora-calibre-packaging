From 119747b25d4148f6c35e6aef45032ac22f37a7bb Mon Sep 17 00:00:00 2001
From: Kovid Goyal <kovid@kovidgoyal.net>
Date: Tue, 13 Aug 2019 11:16:41 +0530
Subject: [PATCH 63/71] ...

---
 recipes/wsj.recipe      | 3 ++-
 recipes/wsj_free.recipe | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/recipes/wsj.recipe b/recipes/wsj.recipe
index f40f3fedfe..5c13138c4f 100644
--- a/recipes/wsj.recipe
+++ b/recipes/wsj.recipe
@@ -114,7 +114,8 @@ def get_browser(self, *a, **kw):
                 '_intstate': 'deprecated',
             }
             for k in 'scope connection nonce state ui_locales ns protocol redirect_uri'.split():
-                request_query[k] = query[k]
+                if k in query:
+                    request_query[k] = query[k]
             login_url = 'https://sso.accounts.dowjones.com/usernamepassword/login'
             # you can get the version below from lib-min.js
             # search for: str: "x.x.x"
diff --git a/recipes/wsj_free.recipe b/recipes/wsj_free.recipe
index 25726c0ca3..d9ecde365d 100644
--- a/recipes/wsj_free.recipe
+++ b/recipes/wsj_free.recipe
@@ -114,7 +114,8 @@ def get_browser(self, *a, **kw):
                 '_intstate': 'deprecated',
             }
             for k in 'scope connection nonce state ui_locales ns protocol redirect_uri'.split():
-                request_query[k] = query[k]
+                if k in query:
+                    request_query[k] = query[k]
             login_url = 'https://sso.accounts.dowjones.com/usernamepassword/login'
             # you can get the version below from lib-min.js
             # search for: str: "x.x.x"
